<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Cohost — Furnished — DRP</title><link rel="stylesheet" href="assets/style.css">
<script type="module">
import { BASELINES, OPS, cohostCalc, money, fmt } from './assets/calc.js';
window.addEventListener('DOMContentLoaded',()=>{
  const neiSel = document.querySelector('#nei');
  const unitSel = document.querySelector('#unit');
  const adrEl = document.querySelector('#adr');
  const occEl = document.querySelector('#occ');
  const avgEl = document.querySelector('#avg');
  const internetC = document.querySelector('#internetC');
  const internetV = document.querySelector('#internetV');
  const insuranceC = document.querySelector('#insuranceC');
  const insuranceV = document.querySelector('#insuranceV');
  const hoaC = document.querySelector('#hoaC');
  const hoaV = document.querySelector('#hoaV');

  BASELINES.neighborhoods.forEach(n=>neiSel.add(new Option(n,n)));
  BASELINES.units.forEach(u=>unitSel.add(new Option(u,u)));

  function loadBaseline(){
    adrEl.value = BASELINES.adr[neiSel.value][unitSel.value];
    occEl.value = Math.round(BASELINES.occ[neiSel.value][unitSel.value]*100);
    avgEl.value = BASELINES.avgStay.toFixed(1);
  }
  loadBaseline();

  unitSel.addEventListener('change',()=>{ loadBaseline(); });
  neiSel.addEventListener('change',()=>{ loadBaseline(); });

  function opsChecked(){
    return Array.from(document.querySelectorAll('.op input[type=checkbox]:checked')).map(x=>x.value);
  }

  function calc(){
    const res = cohostCalc({
      nei: neiSel.value,
      unit: unitSel.value,
      adrInput: Number(adrEl.value||0),
      occInput: Number(occEl.value||0)/100,
      avgStay: Number(avgEl.value||3),
      fixeds: {
        internet: internetC.checked ? Number(internetV.value||0) : 0,
        insurance: insuranceC.checked ? Number(insuranceV.value||0) : 0,
        hoa: hoaC.checked ? Number(hoaV.value||0) : 0
      },
      feeBasePct: 0.22,
      feeBumpsPct: 0.00,
      opsChecked: opsChecked()
    });
    document.querySelector('#kpi-gross').textContent = money(res.gross);
    document.querySelector('#kpi-stays').textContent = fmt(res.stays);
    document.querySelector('#kpi-var').textContent = money(res.varMonthly);
    document.querySelector('#kpi-fee').textContent = money(res.feeMAD) + `  ({}%)`.replace('{}', Math.round(res.feePct*100));
    document.querySelector('#kpi-fixed').textContent = money(res.fixedMonthly);
    document.querySelector('#kpi-owner').textContent = money(res.ownerNet);
    document.querySelector('#kpi-base-owner').textContent = money(res.baseOwner);
  }
  document.querySelector('#go').addEventListener('click', calc);
  calc();
});
</script>
</head>
<body><div class="container">
  <div class="nav">
    <a href="index.html">Home</a>
    <a class="active" href="cohost-furnished.html">Cohost — Furnished</a>
    <a href="cohost-unfurnished.html">Cohost — Unfurnished</a>
    <a href="lease-furnished.html">Lease — Furnished</a>
    <a href="lease-unfurnished.html">Lease — Unfurnished</a>
  </div>
  <div class="card">
    <div class="h"><div class="title">Cohost — Furnished</div><span class="badge">Adjust ADR &amp; occupancy; tick Ops Stops; add fixed costs</span></div>
    <div class="row">
      <div class="field"><label>Neighborhood</label><select id="nei"></select></div>
      <div class="field"><label>Unit</label><select id="unit"></select></div>
      <div class="field"><label>ADR (nightly rate, MAD)</label><input type="number" id="adr" min="0" step="10" value="500"><div class="small">Loads baseline; change if needed.</div></div>
      <div class="field"><label>Occupancy (%)</label><input type="number" id="occ" min="0" max="100" step="1" value="58"><div class="small">Loads baseline; change if needed.</div></div>
    </div>

    <hr class="sep"><legend>Ops Stops</legend>
    <div class="grid">
      <label class="op"><input type="checkbox" value="noise">Noise‑sensitive building</label>
      <label class="op"><input type="checkbox" value="stairs">Stairs only (no elevator)</label>
      <label class="op"><input type="checkbox" value="parking">Parking is difficult</label>
      <label class="op"><input type="checkbox" value="hoa">Strict HOA / building rules</label>
      <label class="op"><input type="checkbox" value="gated">Gated/complex access (multi codes)</label>
      <label class="op"><input type="checkbox" value="maze">Hard‑to‑find address / maze‑like</label>
      <label class="op"><input type="checkbox" value="noself">No self check‑in (in‑person handoff)</label>
      <label class="op"><input type="checkbox" value="delicate">Delicate finishes (extra care)</label>
    </div>

    <hr class="sep"><legend>Fixed costs (monthly)</legend>
    <div class="row">
      <div class="field"><label><input type="checkbox" id="internetC" checked> Internet</label>
        <div style="display:flex;gap:8px;align-items:center;"><input type="number" id="internetV" value="300" min="0" step="10" style="width:120px;"><span class="small">MAD / month</span></div></div>
      <div class="field"><label><input type="checkbox" id="insuranceC" checked> Insurance</label>
        <div style="display:flex;gap:8px;align-items:center;"><input type="number" id="insuranceV" value="120" min="0" step="10" style="width:120px;"><span class="small">MAD / month</span></div></div>
      <div class="field"><label><input type="checkbox" id="hoaC"> HOA</label>
        <div style="display:flex;gap:8px;align-items:center;"><input type="number" id="hoaV" value="0" min="0" step="10" style="width:120px;"><span class="small">MAD / month</span></div></div>
      <div class="field"><label>Avg stay (nights)</label><input type="number" id="avg" value="3.0" min="1" max="14" step="0.5"></div>
    </div>
    
    <div style="margin-top:12px;"><button id="go" class="btn">Calculate</button></div>
  </div>

  <div class="card">
    <table class="table">
      <tr><th>Gross (ADR × nights × occ)</th><td id="kpi-gross">0</td></tr>
      <tr><th>Expected stays / month</th><td id="kpi-stays">0</td></tr>
      <tr><th>Variable expenses (per stay × stays)</th><td id="kpi-var">0</td></tr>
      <tr><th>Cohost Fee</th><td id="kpi-fee">0</td></tr>
      <tr><th>Fixed expenses</th><td id="kpi-fixed">0</td></tr>
      <tr><th>Owner Net</th><td id="kpi-owner">0</td></tr>
      <tr><th>BASE Owner Net (baseline ADR/Occ)</th><td id="kpi-base-owner">0</td></tr>
    </table>
  </div>

  <footer>© Desert Rose Partners — Owner Offer Suite</footer>
</div></body></html>
